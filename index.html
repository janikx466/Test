<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>API Generator / Student Submission</title>

<!-- Tailwind CSS CDN -->
<script src="https://cdn.tailwindcss.com"></script>

<style>
/* Notification box animation */
@keyframes slideDown {
  0% { transform: translateY(-20px); opacity: 0; }
  100% { transform: translateY(0); opacity: 1; }
}
.notification {
  animation: slideDown 0.5s ease forwards;
}
</style>
</head>

<body class="bg-gray-100 min-h-screen flex flex-col items-center p-4">

<div class="w-full max-w-md bg-white rounded-lg shadow-lg p-6 mt-10">
  <h2 class="text-2xl font-bold text-center mb-6 text-blue-600">Student Submission</h2>

  <!-- API Key Input -->
  <input id="apiKey" placeholder="Paste API Key" class="w-full p-3 mb-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400">

  <!-- Student Inputs -->
  <input id="stdName" placeholder="Student Name" class="w-full p-3 mb-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400">
  <input id="stdAge" type="number" placeholder="Age" class="w-full p-3 mb-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400">
  <input id="stdEmail" placeholder="Email" class="w-full p-3 mb-3 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400">

  <button onclick="send()" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded transition duration-200">Submit Student</button>

  <!-- Notification Box -->
  <div id="msg" class="mt-4 text-center font-semibold text-lg"></div>
</div>

<script>
async function send(){
  const apiKey = document.getElementById("apiKey").value.trim();
  const name = document.getElementById("stdName").value.trim();
  const age = document.getElementById("stdAge").value.trim();
  const email = document.getElementById("stdEmail").value.trim();
  const msg = document.getElementById("msg");

  if(!apiKey || !name || !age || !email){
    msg.textContent = "❌ All fields are required!";
    msg.style.color = "red";
    msg.classList.add("notification");
    return;
  }

  msg.textContent = "⏳ Sending data...";
  msg.style.color = "#333";
  msg.classList.add("notification");

  try {
    const res = await fetch("https://tahirvjakis-api.hf.space/external/add-user", {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "X-API-KEY": apiKey
      },
      body: JSON.stringify({ name, age: Number(age), email })
    });

    const text = await res.text();

    if(res.ok){
      msg.textContent = "✅ Submitted successfully! Waiting for approval.";
      msg.style.color = "green";
      msg.classList.add("notification");

      // Clear form fields
      document.getElementById("stdName").value = "";
      document.getElementById("stdAge").value = "";
      document.getElementById("stdEmail").value = "";
    } else {
      msg.textContent = "❌ Error: " + text;
      msg.style.color = "red";
      msg.classList.add("notification");
    }

  } catch(err){
    msg.textContent = "❌ Network error or backend unreachable!";
    msg.style.color = "red";
    msg.classList.add("notification");
    console.error(err);
  }
}
</script>

</body>
  </html>
